
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Easy, fast, reliable -- pick all three!">
      
      
      
        <link rel="canonical" href="https://github.com/eddelbuettel/r2u/">
      
      <link rel="icon" href="assets/Rlogo.png">
      <meta name="generator" content="mkdocs-1.4.0, mkdocs-material-8.5.5">
    
    
      
        <title>CRAN as Ubuntu Binaries - r2u</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.80dcb947.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Lato";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="stylesheets/extra.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#r2u-cran-as-ubuntu-binaries" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="r2u" class="md-header__button md-logo" aria-label="r2u" data-md-component="logo">
      
  <img src="assets/Rlogo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            r2u
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              CRAN as Ubuntu Binaries
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/eddelbuettel/r2u" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="." class="md-tabs__link md-tabs__link--active">
        Home
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="man/buildPackage/" class="md-tabs__link">
        Reference
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="vignettes/FAQ/" class="md-tabs__link">
        Articles
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="news/" class="md-tabs__link">
        News
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="changelog/" class="md-tabs__link">
        Changelog
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="r2u" class="md-nav__button md-logo" aria-label="r2u" data-md-component="logo">
      
  <img src="assets/Rlogo.svg" alt="logo">

    </a>
    r2u
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/eddelbuettel/r2u" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          Home
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Home" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Home
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          CRAN as Ubuntu Binaries
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        CRAN as Ubuntu Binaries
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#key-features" class="md-nav__link">
    Key features
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#brief-demo" class="md-nav__link">
    Brief Demo
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-is-covered" class="md-nav__link">
    What is Covered ?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-is-selected" class="md-nav__link">
    What is Selected ?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-is-it-based-on" class="md-nav__link">
    What is it Based On?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-and-setup" class="md-nav__link">
    Usage and Setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#about-pinning" class="md-nav__link">
    About Pinning
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker" class="md-nav__link">
    Docker
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#github-actions" class="md-nav__link">
    GitHub Actions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#try-it" class="md-nav__link">
    Try It
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-statistics" class="md-nav__link">
    Usage Statistics
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#support" class="md-nav__link">
    Support
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#frequently-asked-questions" class="md-nav__link">
    Frequently Asked Questions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#known-issues" class="md-nav__link">
    Known Issues
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#author" class="md-nav__link">
    Author
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#license" class="md-nav__link">
    License
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#acknowledgment" class="md-nav__link">
    Acknowledgment
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="man/buildPackage/" class="md-nav__link">
        buildPackage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="man/r2u-package/" class="md-nav__link">
        R2u package
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Articles
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Articles" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Articles
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="vignettes/FAQ/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="vignettes/Codespaces/" class="md-nav__link">
        Codespaces
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          News
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="News" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          News
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="news/" class="md-nav__link">
        News
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Changelog
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Changelog" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Changelog
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="changelog/" class="md-nav__link">
        Changelog
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#key-features" class="md-nav__link">
    Key features
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#brief-demo" class="md-nav__link">
    Brief Demo
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-is-covered" class="md-nav__link">
    What is Covered ?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-is-selected" class="md-nav__link">
    What is Selected ?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-is-it-based-on" class="md-nav__link">
    What is it Based On?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-and-setup" class="md-nav__link">
    Usage and Setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#about-pinning" class="md-nav__link">
    About Pinning
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker" class="md-nav__link">
    Docker
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#github-actions" class="md-nav__link">
    GitHub Actions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#try-it" class="md-nav__link">
    Try It
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-statistics" class="md-nav__link">
    Usage Statistics
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#support" class="md-nav__link">
    Support
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#frequently-asked-questions" class="md-nav__link">
    Frequently Asked Questions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#known-issues" class="md-nav__link">
    Known Issues
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#author" class="md-nav__link">
    Author
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#license" class="md-nav__link">
    License
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#acknowledgment" class="md-nav__link">
    Acknowledgment
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="r2u-cran-as-ubuntu-binaries">r2u: CRAN as Ubuntu Binaries</h1>
<h3 id="key-features">Key features</h3>
<ul>
<li>
<p><strong>Full integration with <code>apt</code></strong> as every binary resolves <em>all</em> its dependencies: No more
  installations (of pre-built archives) only to discover that a shared library is missing. No more
  surprises.</p>
</li>
<li>
<p><strong>Full integration with <code>apt</code></strong> so that an update of a system library cannot break an R package:
  if a (shared) library is used by a CRAN, the package manager knows, and will not remove it.  No
  more (R package) breakage from (system) library updates.</p>
</li>
<li>
<p><strong>Simpler and lighter</strong> than some alternatives as only <em>run-time</em> library packages are installed as
  dependencies (instead of generally heavier <em>development</em> packages).</p>
</li>
<li>
<p><strong>Installations are fast, automated and reversible</strong> thanks to the package management layer.</p>
</li>
<li>
<p><strong>Fast and well-connected mirror</strong> at
  <a href="https://r2u.stat.illinois.edu">r2u.stat.illinois.edu</a> on the <a href="https://internet2.edu/">Internet2</a> </p>
</li>
<li>
<p><strong>Complete coverage</strong> with (currently, using 22.04) ~ 24491 CRAN packages (and 435 from
  BioConductor) using <strong>current versions</strong>: We use R 4.4.*, and BioConductor 3.20.</p>
</li>
<li>
<p>Complete support for <strong>Ubuntu 20.04 ("focal")</strong>,  <strong>22.04 ("jammy")</strong> and <strong>24.04 ("noble")</strong>.</p>
</li>
<li>
<p>Optional (but recommended) <a href="https://cloud.r-project.org/package=bspm">bspm</a> use
  <strong>automagically connects R functions like <code>install.packages()</code> to <code>apt</code></strong> for access to binaries 
  <em>and</em> dependencies.</p>
</li>
<li>
<p><strong>Docker containers</strong> <code>rocker/r2u</code> from the <a href="https://rocker-project.org/">Rocker Project</a> for both 
  'focal', 'jammy' and 'noble'.</p>
</li>
<li>
<p><strong>GitHub Actions support</strong> to set up on Ubuntu 22.04 "jammy" or via container.</p>
</li>
</ul>
<h3 id="brief-demo">Brief Demo</h3>
<p>The gif below shows how <em>one <code>install.packages("tidyverse")</code> command</em> on an Ubuntu
20.04 system <em>installs all packages and dependencies as binaries in 18 seconds</em> (by passing the
R package installation to <code>apt</code> using <a href="https://cloud.r-project.org/package=bspm">bspm</a>).</p>
<p><img alt="" src="https://eddelbuettel.github.io/r2u/assets/tidyverse_from_r2u_2022-05-04_17-09.gif" /></p>
<p>This uses the Docker container referenced below, which has been set up with
the five easy setup steps detailed here.</p>
<h3 id="what-is-covered">What is Covered ?</h3>
<p>We generally support amd64 (<em>i.e.</em> standard 64-bit Intel/AMD cpus, sometimes also called x86_64) for
the current Ubuntu LTS release and its predecessor release (more on this
<a href="https://eddelbuettel.github.io/r2u/vignettes/FAQ/#what-about-other-architectures-besides-x86_64">here</a>).
We use 'r-release' just like CRAN. So currently the 'focal' 20.04 LTS, 'jammy' 22.04 LTS and 'noble'
24.04 releases are fully supported.</p>
<p>Support for other cpu architectures is certainly possible but somewhat unlikely due to a lack of
(additional hardware) resources and time. Support for other distributions is possible but unlikely
right now (due to a lack of resources and time). P3M/PPM/RSPM now appears to also support Debian which
could be added at some later point.</p>
<p>Current versions are based on R 4.4.0, and BioConductor release 3.20 packages are provided when
required by CRAN packages.  Binaries are generally R 4.4.<em> based. Some older packages released when
we used R 4.2.</em> or 4.3.<em> may have been built with R 4.2.</em> or R 4.3.<em>, they will still work the same
with R 4.4.</em> as R is generally forward-compatible.</p>
<h3 id="what-is-selected">What is Selected ?</h3>
<p>Everything :)</p>
<p>Initially, we started from <a href="https://cran-logs.rstudio.com/">cran-logs</a> by picking the <em>N</em>
most-downloaded packages, along with their dependencies from BioConductor.  (It should be noted that
for example the first 100 packages already account for approximately half the total downloads: it is
a very skewed distribution.) We iterated, and fairly soon arrived of full coverage of CRAN.</p>
<p>So we now cover</p>
<ul>
<li><em>all CRAN packages</em> (modulo at best handful of blacklisted ones) including all packages needing
  compilation</li>
<li>all BioConductor packages implied by these plus a 'healthy subset' of the highest
    <a href="https://bioconductor.org/packages/stats/bioc/bioc_pkg_scores.tab">scoring</a> BioConductor
    packages (also covering <em>e.g.</em> all BioConductor packages in the Debian and Ubuntu distributions)</li>
</ul>
<p>This currently results in 24572, 24491, 22140 binary packages from CRAN in "focal", "jammy", and
"noble", respectively, and 427, 435, and 450 BioConductor packages, respectively, from the 3.20 
releases. (See this
<a href="https://eddelbuettel.github.io/r2u/vignettes/FAQ/#why-does-it-have-more-packages-than-cran">FAQ</a>
about why this number is higher than CRAN, and variable between releases.)</p>
<p>The sole exception are two packages we cannot build (as we do not have the required commercial
software it accessess) plus less than a handful of 'odd builds' that fail and
are skipped.</p>
<h3 id="what-is-it-based-on">What is it Based On?</h3>
<p>For the CRAN binaries we either repackage
<a href="https://packagemanager.rstudio.com/client/#/repos/2/packages/">P3M/RSPM/PPM</a> builds (where
available) or build natively. All selected BioConductor packages are built natively.  For all of
these, full dependency resolution and integration with the system is a key feature.</p>
<p>Everything is provided as <code>.deb</code> binary files with proper dependency
resolution by using a proper <code>apt</code> repo which also has a signed Release file.</p>
<h3 id="usage-and-setup">Usage and Setup</h3>
<p>(Note that you could use one of the scripts
<a href="https://github.com/eddelbuettel/r2u/blob/master/inst/scripts/add_cranapt_noble.sh"><code>add_cranapt_noble.sh</code></a>
(for Ubuntu 24.04), or
<a href="https://github.com/eddelbuettel/r2u/blob/master/inst/scripts/add_cranapt_jammy.sh"><code>add_cranapt_jammy.sh</code></a>
(for Ubuntu 22.04), or
<a href="https://github.com/eddelbuettel/r2u/blob/master/inst/scripts/add_cranapt_focal.sh"><code>add_cranapt_focal.sh</code></a>
(for the older Ubuntu 20.04) to facilitate the setup. They are tested on 'empty' Ubuntu containers
of the corresponding release. However, you may prefer to execute the steps outlined here by hand.)
You can use <code>lsb_release -cs</code> to generate your release name: "focal", "jammy", and "noble" are
supported and you could swap "focal" or "noble" in below (or use one of the scripts).</p>
<p>Here, we show the setup step by step for 'jammy' aka Ubuntu 22.04 (as it is still the most-widely
used distribution per our logs). You should run all these commands as <code>root</code> to carefully review
each one. If you prefer the newer Ubuntu 24.04, please see the
<a href="https://github.com/eddelbuettel/r2u/blob/master/inst/scripts/add_cranapt_noble.sh"><code>add_cranapt_noble.sh</code></a>
script which also avoids the now-deprecated <code>apt-key</code> command).</p>
<p><strong> Step 1: Update apt, install tools, fetch key</strong></p>
<p>First add the repository key so that <code>apt</code> knows it (this is optional but recommended)</p>
<pre><code class="language-sh">apt update -qq &amp;&amp; apt install --yes --no-install-recommends wget \
    ca-certificates gnupg
wget -q -O- https://eddelbuettel.github.io/r2u/assets/dirk_eddelbuettel_key.asc \
    | tee -a /etc/apt/trusted.gpg.d/cranapt_key.asc
</code></pre>
<p><strong> Step 2: Add the apt repo</strong></p>
<p>Second, add the repository to the <code>apt</code> registry. We recommend the well-connected main mirror
provide at University of Illinois:</p>
<pre><code class="language-sh">echo &quot;deb [arch=amd64] https://r2u.stat.illinois.edu/ubuntu jammy main&quot; \
     &gt; /etc/apt/sources.list.d/cranapt.list
apt update -qq
</code></pre>
<p><strong> Step 3: Ensure you have current R binaries (optional)</strong></p>
<p>Third, and optionally, if you do not yet have the current R version, run these two lines (or
use the <a href="https://cloud.r-project.org/bin/linux/ubuntu/">standard CRAN repo setup</a>)</p>
<pre><code class="language-sh">wget -q -O- https://cloud.r-project.org/bin/linux/ubuntu/marutter_pubkey.asc \
    | tee -a /etc/apt/trusted.gpg.d/cran_ubuntu_key.asc
echo &quot;deb [arch=amd64] https://cloud.r-project.org/bin/linux/ubuntu jammy-cran40/&quot; \
    &gt; /etc/apt/sources.list.d/cran_r.list
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys \
    67C2D66C4B1D4339 51716619E084DAB9
apt update -qq
DEBIAN_FRONTEND=noninteractive apt install --yes --no-install-recommends \
    r-base-core
</code></pre>
<p><strong> Step 4: Use pinning for the r2u repo (optional)</strong></p>
<p>Fourth, add repository 'pinning' as <code>apt</code> might get confused by some older
packages (in the Ubuntu distro) which accidentally appear with a higher
version number. See the next section for a short discussion how it ensures 'CRANapt' 
sorts highest.</p>
<pre><code class="language-sh">echo &quot;Package: *&quot; &gt; /etc/apt/preferences.d/99cranapt
echo &quot;Pin: release o=CRAN-Apt Project&quot; &gt;&gt; /etc/apt/preferences.d/99cranapt
echo &quot;Pin: release l=CRAN-Apt Packages&quot; &gt;&gt; /etc/apt/preferences.d/99cranapt
echo &quot;Pin-Priority: 700&quot;  &gt;&gt; /etc/apt/preferences.d/99cranapt
</code></pre>
<p>After that the package are known (under their <code>r-cran-*</code> and <code>r-bioc-*</code>
names).  You can install them on the command-line using <code>apt</code> and <code>apt-get</code>,
via <code>aptitude</code> as well as other front-ends.</p>
<p><strong> Step 5: Use <code>bspm</code> (optional)</strong></p>
<p>Fifth, and also optional, install and enable the <a href="https://cloud.r-project.org/package=bspm">bspm</a>
package so that the r2u (or CRANapt) as well as other R packages (available as <code>r-*.deb</code> binaries)
become available via <code>install.packages()</code> and <code>update.packages()</code>. Note that you may need to install
it directly from source via <code>sudo Rscript -e 'install.packages("bspm")'</code> to ensure it integrates
correctly with the packaging system.  You should also install Python components used internally by
<a href="https://cloud.r-project.org/package=bspm">bspm</a> via the <code>sudo apt-get install
python3-{dbus,gi,apt}</code> command.</p>
<pre><code class="language-sh">apt install --yes --no-install-recommends python3-{dbus,gi,apt}
## Then install bspm (as root) and enable it, and enable a speed optimization
Rscript -e 'install.packages(&quot;bspm&quot;)'
RHOME=$(R RHOME)
echo &quot;suppressMessages(bspm::enable())&quot; &gt;&gt; ${RHOME}/etc/Rprofile.site
echo &quot;options(bspm.version.check=FALSE)&quot; &gt;&gt; ${RHOME}/etc/Rprofile.site
</code></pre>
<p>That's it! Now try it out!</p>
<h3 id="about-pinning">About Pinning</h3>
<p>Packages can be found in different repositories, and <em>generally</em> the highest available version is
the one we what---and <code>apt</code> picks it for us. Now, because we let <code>apt</code> (and related tools) pick the
packages based on versions, we may want to ensure that the CRANapt repo sorts higher than the
default repo as (older) package builds in the distribution itself may appear (to <code>apt</code>) to be newer
via a quirk in the sorting algorithm. A case in point was package <code>gtable</code> whose version in Ubuntu
was <code>0.3.0+dfsg-1</code> which accidentally sorts higher than the rebuild we made under a newer and more
consistent version number <code>0.3.0-1.ca2004.1</code>.</p>
<p>For this issue, one possible and popular fix is to use 'apt pinning'. It can give 'higher weight'
to packages from a particular repositor or tag.  In the suggested example above, we
give the r2u / cranapt repo a weight of 700 which is higher than the package default value of
500.</p>
<h3 id="docker">Docker</h3>
<p>There are also Docker containers for Ubuntu 20.04 'focal', 22.04 'jammy', and 24.04 'noble',
respectively.  Initially published as
<a href="https://hub.docker.com/repository/docker/eddelbuettel/r2u">eddelbuettel/r2u</a>, these are now also
available also as <a href="https://github.com/rocker-org/r2u">rocker/r2u</a>. They all have the features
detailed above, including pinning and <a href="https://cran.r-project.org/package=bspm">bspm</a> support,
already set up.</p>
<p>Each of the Ubuntu LTS flavors, <em>i.e.</em>, 'focal' and 'jammy' is also available as an identical image
using the release version, <em>i.e.</em>, '20.04', '22.04', and '24.04', respectively.</p>
<p>Note that with some builds of Docker (and possibly related to Ubuntu hosts) you may have to add
the <code>--security-opt seccomp=unconfined</code> option to your Docker invocation to take advantage of bspm
and the full system integration inside the container.
This is also documented in the <a href="https://eddelbuettel.github.io/r2u/vignettes/FAQ/">FAQ</a>.</p>
<h3 id="github-actions">GitHub Actions</h3>
<p>There are two basic ways to take advantage of <em>r2u</em> in a GitHub Actions.  The first, and simplest,
is to switch to using the Docker container (see previous section). This is as simple as adding the
<code>container:</code> statement after <code>runs-on:</code> in <code>jobs:</code> section:</p>
<pre><code>    runs-on: ubuntu-latest
    container:
      image: rocker/r2u:22.04
</code></pre>
<p>A complete example is provided in <a href="https://github.com/eddelbuettel/RcppInt64/blob/master/.github/workflows/r2u.yaml">this R package
repo</a>. The key
advantage of this approach is that everything is already set up.</p>
<p>A second approach consists of adding <em>r2u</em> as a step via <a href="https://github.com/eddelbuettel/github-actions">the <code>r2u-setup</code> GitHub
Action</a>:</p>
<pre><code>      - name: Setup r2u
        uses: eddelbuettel/github-actions/r2u-setup@master
</code></pre>
<p>A complete example is provided <a href="https://github.com/eddelbuettel/spotifytop50us/blob/master/.github/workflows/update.yaml">in this
repo</a>
where we use it because using the Docker container approach makes committing back via <code>git</code> a little
harder.</p>
<h3 id="try-it">Try It</h3>
<p><strong> Via codespaces </strong></p>
<p>See the vignette <a href="https://eddelbuettel.github.io/r2u/vignettes/Codespaces/">Codespaces</a> about how to
launch a 'Codespace' directly in your browser, launched from the gitrepo within minutes.</p>
<p>This also works from your <a href="https://code.visualstudio.com/">vscode</a> installation as a remote
codespace.</p>
<p>The vignette has more details.</p>
<p><strong> Via gitpod.io </strong></p>
<p>Use this link below (after possibly signing up for
<a href="https://gitpod.io/">gitpod.io</a> first)</p>
<p><a href="https://gitpod.io/#https://github.com/eddelbuettel/r2u"><img alt="Open in Gitpod" src="https://gitpod.io/button/open-in-gitpod.svg" /></a></p>
<p>and run <a href="https://github.com/eddelbuettel/r2u/tree/master/inst/examples">one of the three example
scripts</a>, or
just start R in the terminal window.</p>
<p><img alt="" src="https://eddelbuettel.github.io/r2u/assets/gitpod_brms_2022-05-08_11-21.gif" /></p>
<p>The gif below display running one such example to install
<a href="https://github.com/paul-buerkner/brms">brms</a> from binaries in a few seconds.  Using this requires
only (free) <a href="https://github.com">GitHub</a> and <a href="https://gitpod.io">GitPod</a> accounts.</p>
<h3 id="usage-statistics">Usage Statistics</h3>
<p>Usage is vibrant.  As of January 2025, over 300,000 packages are shipped per week, with a total of
now over thirty three million packages shipped.  Early September 2023 also had the most recent and
dramatic spike of <em>over three million packages in two days</em>.  The following chart gives a summary of
cumulative and average weekly downloads (the latter one on a log scale) as of August.</p>
<p><img alt="" src="https://eddelbuettel.github.io/images/2025-01-07/r2u_aggregated_and_weekly_2025-01-07.png" /></p>
<h3 id="support">Support</h3>
<p>Please file issues at the <a href="https://github.com/eddelbuettel/r2u/issues">GitHub issues for r2u</a>.</p>
<h3 id="frequently-asked-questions">Frequently Asked Questions</h3>
<p>Please also see the <a href="https://eddelbuettel.github.io/r2u/vignettes/FAQ/">FAQ</a> for answers to
<em>Frequently Asked Questions</em>.</p>
<h3 id="known-issues">Known Issues</h3>
<ul>
<li>
<p>The littler package reflects build-time configuration, the RSPM/PPM binary is then expecting a
  different R location so it needs a binary rebuild. Added a 'force' flag, may need a list similar
  to the blacklist to always compiled.</p>
</li>
<li>
<p>A small number of packages do not build for lack required components; examples are ROracle and
  Rcplex.  They, and their reverse dependencies, are blacklisted and not built.</p>
</li>
<li>
<p>r2u is an <code>apt</code> repo, which via <code>bspm</code> becomes used "automagically" via standard R calls of
  <code>install.packages()</code> and alike. That last part is important: package installations that do not use
  <code>install.packages()</code> (such as <code>renv</code>, <code>rig</code>, ...) do not benefit from
  <code>install.packages()</code> calling <code>apt</code> for you, and cannot take advantage of r2u via <code>bspm</code>.</p>
</li>
<li>
<p><code>bspm</code> traces calls to <code>install.packages()</code> and maps them system-wide installation via <code>apt</code>.  By
  choice, it does not map the <code>remove.packages()</code> for package removal, see <a href="https://github.com/Enchufa2/bspm/issues/43">this
  issue</a> for more discussion. Packages can be uninstalled
  via the system package manager using, respectively, <code>apt</code>, <code>dpkg</code> or one of graphical frontends as
  well as via the R function <code>bspm::remove_sys()</code>.</p>
</li>
</ul>
<h3 id="author">Author</h3>
<p>Dirk Eddelbuettel</p>
<h3 id="license">License</h3>
<p>The repository-building code in this package is released under the GPL (&gt;= 2).</p>
<p>All CRAN and BioConductor packages are released under their respective licenses.</p>
<h3 id="acknowledgment">Acknowledgment</h3>
<p>This was made possible by the generous support of endless coffee thanks to my
<a href="https://github.com/sponsors/eddelbuettel">GitHub Sponsors</a>.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
      
        
        <a href="man/buildPackage/" class="md-footer__link md-footer__link--next" aria-label="Next: buildPackage" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              buildPackage
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 - present Dirk Eddelbuettel
    </div>
  
  
    Site made with
    <a href="https://www.R-Project.org">R</a> scripts and
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener"> Material for MkDocs </a>
  
</div>
      
        <div class="md-social">
  
    
    
    <a href="https://github.com/eddelbuettel/r2u" target="_blank" rel="noopener" title="r2u on GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    <a href="https://twitter.com/eddelbuettel" target="_blank" rel="noopener" title="eddelbuettel on Twitter" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.tabs", "navigation.instant"], "search": "assets/javascripts/workers/search.5bf1dace.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.078830c0.min.js"></script>
      
    
  </body>
</html>